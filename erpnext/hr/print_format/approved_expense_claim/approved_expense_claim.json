{
 "align_labels_right": 0, 
 "creation": "2019-09-05 10:54:55.072343", 
 "custom_format": 1, 
 "disabled": 0, 
 "doc_type": "Expense Claim", 
 "docstatus": 0, 
 "doctype": "Print Format", 
 "font": "Default", 
 "html": "\n    <html>\n            {% set dep = frappe.get_doc(\"Employee\",{\"employee_name\":doc.employee_name}) %}\n\n    <body>\n        <h3 align=\"center\">TRAVEL EXPENSES STATEMENT</h3></BR></BR>\n        <table border=1 width=\"650\">\n            <tr>\n                <td width=\"50%\">NAME: {{ doc.employee_name }}</td>\n                <td width=\"50%\">LOCATION: {{ doc.location }}/CODE:{{dep.location_code}}</td>\n            </tr>\n            <tr>\n                <td>EMP.CODE: {{ doc.employee }}</td>\n                <td>COST CENTER: {{ doc.cost_center1 }} </td>\n            </tr>\n            <tr>\n                <td>DESIGNATION:{{ doc.designation }}</td>\n                <td>DEPARTMENT:{{ doc.department }}/CODE:{{dep.department_code or \"\"}}</td>\n            </tr>\n        <tr>\n                <td>GRADE: {{ doc.grade }}</td>\n            <td>PURPOSE OF TRAVEL:\n                {% if doc.purpose_of_travel %}\n                {{ doc.purpose_of_travel }}\n                {% else %}\n                {{ \"\" }}\n                {% endif %}</td>\n            </tr>\n            <tr>\n      <td>LEDGER CODE:70020000={{frappe.utils.fmt_money(((doc.claim_amount1 or 0)|round|int),currency=\"INR\") }}</td>\n      <td>LEDGER CODE:70010000\n        ={{frappe.utils.fmt_money(((doc.claim_amount_m+doc.claim_amount_c+doc.sanctioned_amount or 0)|round|int),currency=\"INR\") }}</td>\n    </tr>\n \n        </table>\n        {% set total = {} %}\n        {% set tot = 0 %}\n        {% set travel_finished = [] %}\n        {% set DA_finished = [] %}\n        {% set HOTMEAL = [] %}\n        {% set others_finished = [] %}\n        {% set conveyance_finished = [] %}\n        {% set count = doc.expenses|length %}\n        <h5>1.TRAVEL: AIR/TRAIN/BUS</H5>\n        <TABLE BORDER=\"1\" WIDTH=\"650\">\n            <TR HEIGHT=\"20\">\n                <TD ALIGN=\"CENTER\" COLSPAN=2 width = \"150\">DATE</TD>\n                <TD ALIGN=\"CENTER\" COLSPAN=2 width = \"150\">PLACE</TD>\n                <TD ALIGN=\"CENTER\" ROWSPAN=2 width = \"100\">CLASS OF <BR>TRAVEL</TD>\n                <TD ALIGN=\"CENTER\" COLSPAN=2 width = \"100\">AMOUNT PAID BY</TD>\n                <TD ALIGN=\"CENTER\" ROWSPAN=2 width = \"150\">AMOUNT<br>RS.</TD>\n            </TR>\n            <TR HEIGHT=\"20\">\n                <TD ALIGN=\"CENTER\">FROM DATE</TD>\n                <TD ALIGN=\"CENTER\">TO DATE</TD>\n                <TD ALIGN=\"CENTER\">FROM</TD>\n                <TD ALIGN=\"CENTER\">TO</TD>\n                <TD ALIGN=\"CENTER\">SELF<BR>RS.</TD>\n                <TD ALIGN=\"CENTER\">COMPANY<BR>RS.</TD>\n            </TR>\n            {% set j = 0 %}\n            {% for j in range(count) %}\n            {% if doc.expenses[j].expense_type == \"TRAVEL\" %}\n            <TR HEIGHT=\"20\">\n                <TD ALIGN=\"CENTER\">{{ frappe.utils.formatdate(doc.expenses[j].from_date) }}</TD>\n                <TD ALIGN=\"CENTER\">{{ frappe.utils.formatdate(doc.expenses[j].to_date) }}</TD>\n                <TD ALIGN=\"CENTER\">{{ doc.from_place }}</TD>\n                <TD ALIGN=\"CENTER\">{{ doc.to_place }}</TD>\n                {%if doc.expenses[j].class_of_travel %}\n                <TD ALIGN=\"center\">{{ doc.expenses[j].class_of_travel }} </TD>\n                {% else %}\n                <td></td>\n                {% endif %}\n                {% if doc.expenses[j].booking_type == \"Self\" %}\n                <td align=\"center\">{{frappe.utils.fmt_money(((doc.claim_amount or 0)|round|int),currency=\"INR\") }}</td>\n                <td></td>\n                {% else %}\n                <td></td>\n                <td align=\"center\">{{frappe.utils.fmt_money(((doc.sanctioned_amount or 0)|round|int),currency=\"INR\") }}</td>\n                {% endif %}\n                <TD ALIGN=\"right\">{{ doc.expenses[j].sanctioned_amount }} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>\n            </TR>\n <TR HEIGHT=\"20\">\n                <TD ALIGN=\"CENTER\">{{ frappe.utils.formatdate(doc.expenses[j].from_date) }}</TD>\n                <TD ALIGN=\"CENTER\">{{ frappe.utils.formatdate(doc.expenses[j].to_date) }}</TD>\n                <TD ALIGN=\"CENTER\">{{ doc.from_place_r }}</TD>\n                <TD ALIGN=\"CENTER\">{{ doc.to_place_r }}</TD>\n                {%if doc.expenses[j].class_of_travel %}\n                <TD ALIGN=\"center\">{{ doc.expenses[j].class_of_travel }} </TD>\n                {% else %}\n                <td></td>\n                {% endif %}\n                {% if doc.expenses[j].booking_type == \"Self\" %}\n                <td align=\"center\">{{frappe.utils.fmt_money(((doc.claim_amount or 0)|round|int),currency=\"INR\") }}</td>\n                <td></td>\n                {% else %}\n                <td></td>\n                <td align=\"center\">{{frappe.utils.fmt_money(((doc.sanctioned_amount or 0)|round|int),currency=\"INR\") }}</td>\n                {% endif %}\n                <TD ALIGN=\"right\">{{frappe.utils.fmt_money(((doc.sanctioned_amount or 0)|round|int),currency=\"INR\") }}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>\n            </TR>\n            {% set a = travel_finished.append(doc.expenses[j].sanctioned_amount) %}\n            {% endif %}\n            {% endfor %}\n            <TR HEIGHT=\"20\">\n                <TD ALIGN=\"right\" colspan=\"7\"><b>Sub-Total</b></TD>\n                <TD ALIGN=\"right\" colspan=\"8\">     {{frappe.utils.fmt_money(((travel_finishe|sum() or 0)|round|int),currency=\"INR\") }}\n<b>\n                   \n    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n                </b></TD>\n            </TR>\n        </table><h5>2. STAY & FOOD:</H5>\n        <table border=1 width=\"650\">\n            <tr>\n                <td align=\"center\" width=\"25%\">DATE</td>\n                <td align=\"center\" width=\"25%\">HOTEL NAME</td>\n                <td align=\"center\" width=\"28%\">BILL No</td>\n                <td align=\"center\" style=\"width:50px;\" width=\"22%\">AMOUNT<BR>Rs.</td>\n\n            </tr>\n\n            <tr>\n                {%-for row in doc.stay_expenses-%}\n\n                <td>{{ frappe.utils.formatdate(row.date)}}</td>\n                <td>{{row.hotel_name}}</td>\n                <td>{{row.bill_no or ''}}</td>\n                <td>{{row.amount or ''}}</td>\n            </tr>\n            {%-endfor-%}\n            <tr>\n                <td colspan=\"3\" align=\"right\"><b>Sub Total</b></td>\n\n                <td colspan=\"1\" align=\"right\">{{frappe.utils.fmt_money(((doc.claim_amount_h or 0)|round|int),currency=\"INR\") }}</td>\n\n            </tr>\n\n        </table>\n        <h5>3. DAILY ALLOWANCES:</H5>\n        <table border=1 width=\"650\">\n            <tr>\n                <td align=\"center\" width=\"250\">No.of<br>DAYS</td>\n                <td align=\"center\" width=\"250\">DAILY ALLOWANCE<br>Rs.</td>\n                <td align=\"center\" width=\"150\">AMOUNT<BR>Rs.</td>\n            </tr>\n            {% set j = 0 %}\n            {% for j in range(count) %}\n            {% if doc.expenses[j].expense_type == \"DAILY ALLOWANCES\" %}\n            <tr>\n                <td align=\"center\">{{ doc.expenses[j].no_of_days }}</td>\n                <td align=\"center\">{{ 100 }}</td>\n                <td align=\"right\">{{frappe.utils.fmt_money(((doc.claim_amount or 0)|round|int),currency=\"INR\") }}\n                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>\n            </tr>\n            {% set a = DA_finished.append(doc.expenses[j].claim_amount) %}\n            {% endif %}\n            {% endfor %}\n            <TR HEIGHT=\"20\">\n                <TD ALIGN=\"right\" colspan=\"2\"><b>Sub-Total</b></TD>\n                <TD ALIGN=\"right\" colspan=\"2\"><b>     {{frappe.utils.fmt_money((( DA_finished|sum() or 0)|round|int),currency=\"INR\") }}\n                     \n                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n                    </b></TD>\n            </TR>\n        </table>\n        <h5>4.CONVEYANCE EXPENSES :</H5>\n            <table border=1 width=\"650\">\n                <tr>\n                    <td align=\"center\" width=\"25%\">DATE</td>\n                    <td align=\"center\" width=\"25%\">FROM </td>\n                    <td align=\"center\" width=\"28%\">TO</td>\n                    <td align=\"center\" width=\"10%\">MODE OF TRAVEL</td>\n                    <td align=\"center\" style=\"width:50px;\" width=\"10%\">AMOUNT<BR>Rs.</td>\n        \n                </tr>\n        \n                <tr>\n                    {%-for row in doc.conveyance_expenses-%}\n        \n                    <td>{{ frappe.utils.formatdate(row.date)}}</td>\n                    <td>{{row.from}}</td>\n                    <td>{{row.to or ''}}</td>\n                    <td>{{row.mode_of_travel or ''}}</td>\n                    <td align=\"right\">{{frappe.utils.fmt_money(((row.amount or 0)|round|int),currency=\"INR\") }}</td>\n                </tr>\n                {%-endfor-%}\n                <tr>\n                    <td colspan=\"4\" align=\"right\"><b>Sub Total</b></td>\n        \n                    <td colspan=\"1\" align=\"right\"><b>     {{frappe.utils.fmt_money(((doc.claim_amount_c or 0)|round|int),currency=\"INR\") }}</b></td>\n        \n                </tr>\n        \n            </table>\n            <h5>5.OTHER EXPENSES :</H5>\n                <table border=1 width=\"650\">\n                    <tr>\n                        <td align=\"center\" width=\"25%\">DATE</td>\n                        <td align=\"center\" width=\"25%\">DESCRIPTION </td>\n                        <td align=\"center\" width=\"28%\">BILL NO</td>\n                        <td align=\"center\" style=\"width:50px;\" width=\"22%\">AMOUNT<BR>Rs.</td>\n            \n                    </tr>\n            \n                    <tr>\n                        {%-for row in doc.other_expenses-%}\n            \n                        <td>{{ frappe.utils.formatdate(row.date)}}</td>\n                        <td>{{row.description}}</td>\n                        <td>{{row.bill_no or ''}}</td>\n                        <td>{{frappe.utils.fmt_money(((row.amount or 0)|round|int),currency=\"INR\") }}</td>\n                    </tr>\n                    {%-endfor-%}\n                    <tr>\n                        <td colspan=\"3\" align=\"right\"><b>Sub Total</b></td>\n            \n                        <td colspan=\"1\" align=\"right\"><b>     {{frappe.utils.fmt_money(((doc.claim_amount_o or 0)|round|int),currency=\"INR\") }}</b></td>\n            \n                    </tr>\n            \n        </table><br><br><br><br><br><br>\n       \n    </body>\n <div class=\"row\">\n        <div class=\"col-xs-6\">\n            Approved by :<br>\n            S.Raghavan</div>\n        <div class=\"col-xs-6\">\n            <div align=\"right\"> Grand Total :{{frappe.utils.fmt_money(((doc.total_sanctioned_amount or 0)|round|int),currency=\"INR\") }}</div><br>\n  <div align=\"right\"> Sub Total( 1+2+3+4+5 )</div>\n</div><br></div>\n<p><center>This is a Computer Generated Document.No Signature Required.</center></p>\n<hr>\n\n    </html>\n", 
 "idx": 0, 
 "line_breaks": 0, 
 "modified": "2019-10-09 11:15:42.521871", 
 "modified_by": "Administrator", 
 "module": "HR", 
 "name": "Approved Expense Claim", 
 "owner": "Administrator", 
 "print_format_builder": 0, 
 "print_format_type": "Server", 
 "show_section_headings": 0, 
 "standard": "Yes"
}